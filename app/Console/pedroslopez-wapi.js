const moduleRaid=function(){return moduleRaid.mID=Math.random().toString(36).substring(7),moduleRaid.mObj={},(fillModuleArray=function(){(window.webpackChunkbuild||window.webpackChunkwhatsapp_web_client).push([[moduleRaid.mID],{},function(e){Object.keys(e.m).forEach(function(t){moduleRaid.mObj[t]=e(t)})},])})(),get=function e(t){return moduleRaid.mObj[t]},findModule=function e(t){return results=[],(modules=Object.keys(moduleRaid.mObj)).forEach(function(e){if(void 0!==(mod=moduleRaid.mObj[e])){if("string"==typeof t){if("object"==typeof mod.default)for(key in mod.default)key==t&&results.push(mod);for(key in mod)key==t&&results.push(mod)}else if("function"==typeof t)t(mod)&&results.push(mod);else throw TypeError("findModule can only find via string and function, "+typeof t+" was passed")}}),results},{modules:moduleRaid.mObj,constructors:moduleRaid.cArr,findModule:findModule,get:get}};"object"==typeof module&&module.exports?module.exports=moduleRaid:window.mR=moduleRaid(),window.mR=moduleRaid(),window.Store=Object.assign({},window.mR.findModule(e=>e.default&&e.default.Chat)[0].default),window.Store.AppState=window.mR.findModule("Socket")[0].Socket,window.Store.Conn=window.mR.findModule("Conn")[0].Conn,window.Store.BlockContact=window.mR.findModule("blockContact")[0],window.Store.Call=window.mR.findModule("CallCollection")[0].CallCollection,window.Store.Cmd=window.mR.findModule("Cmd")[0].Cmd,window.Store.CryptoLib=window.mR.findModule("decryptE2EMedia")[0],window.Store.DownloadManager=window.mR.findModule("downloadManager")[0].downloadManager,window.Store.GroupMetadata=window.mR.findModule("GroupMetadata")[0].default.GroupMetadata,window.Store.Invite=window.mR.findModule("resetGroupInviteCode")[0],window.Store.InviteInfo=window.mR.findModule("queryGroupInvite")[0],window.Store.Label=window.mR.findModule("LabelCollection")[0].LabelCollection,window.Store.MediaPrep=window.mR.findModule("prepRawMedia")[0],window.Store.MediaObject=window.mR.findModule("getOrCreateMediaObject")[0],window.Store.NumberInfo=window.mR.findModule("formattedPhoneNumber")[0],window.Store.MediaTypes=window.mR.findModule("msgToMediaType")[0],window.Store.MediaUpload=window.mR.findModule("uploadMedia")[0],window.Store.MsgKey=window.mR.findModule(e=>e.default&&e.default.fromString)[0].default,window.Store.MessageInfo=window.mR.findModule("sendQueryMsgInfo")[0],window.Store.OpaqueData=window.mR.findModule(e=>e.default&&e.default.createFromData)[0].default,window.Store.QueryExist=window.mR.findModule("queryExist")[0]?window.mR.findModule("queryExist")[0].queryExist:window.mR.findModule("queryExist")[0].queryWidExists,window.Store.QueryProduct=window.mR.findModule("queryProduct")[0],window.Store.QueryOrder=window.mR.findModule("queryOrder")[0],window.Store.SendClear=window.mR.findModule("sendClear")[0],window.Store.SendDelete=window.mR.findModule("sendDelete")[0],window.Store.SendMessage=window.mR.findModule("addAndSendMsgToChat")[0],window.Store.SendSeen=window.mR.findModule("sendSeen")[0],window.Store.User=window.mR.findModule("getMaybeMeUser")[0],window.Store.UploadUtils=window.mR.findModule(e=>e.default&&e.default.encryptAndUpload?e.default:null)[0].default,window.Store.UserConstructor=window.mR.findModule(e=>e.default&&e.default.prototype&&e.default.prototype.isServer&&e.default.prototype.isUser?e.default:null)[0].default,window.Store.Validators=window.mR.findModule("findLinks")[0],window.Store.VCard=window.mR.findModule("vcardFromContactModel")[0],window.Store.WidFactory=window.mR.findModule("createWid")[0],window.Store.ProfilePic=window.mR.findModule("profilePicResync")[0],window.Store.PresenceUtils=window.mR.findModule("sendPresenceAvailable")[0],window.Store.ChatState=window.mR.findModule("sendChatStateComposing")[0],window.Store.GroupParticipants=window.mR.findModule("promoteParticipants")[0],window.Store.JoinInviteV4=window.mR.findModule("sendJoinGroupViaInviteV4")[0],window.Store.findCommonGroups=window.mR.findModule("findCommonGroups")[0].findCommonGroups,window.Store.StatusUtils=window.mR.findModule("setMyStatus")[0],window.Store.ConversationMsgs=window.mR.findModule("loadEarlierMsgs")[0],window.Store.sendReactionToMsg=window.mR.findModule("sendReactionToMsg")[0].sendReactionToMsg,window.Store.createOrUpdateReactionsModule=window.mR.findModule("createOrUpdateReactions")[0],window.Store.EphemeralFields=window.mR.findModule("getEphemeralFields")[0],window.Store.ReplyUtils=window.mR.findModule("canReplyMsg").length>0&&window.mR.findModule("canReplyMsg")[0],window.Store.MsgActionChecks=window.mR.findModule("canSenderRevokeMsg")[0],window.Store.QuotedMsg=window.mR.findModule("getQuotedMsgObj")[0],window.Store.Socket=window.mR.findModule("deprecatedSendIq")[0],window.Store.SocketWap=window.mR.findModule("wap")[0],window.Store.SearchContext=window.mR.findModule("getSearchContext")[0].getSearchContext,window.Store.DrawerManager=window.mR.findModule("DrawerManager")[0].DrawerManager,window.Store.StickerTools={...window.mR.findModule("toWebpSticker")[0],...window.mR.findModule("addWebpMetadata")[0]},window.Store.GroupUtils={...window.mR.findModule("createGroup")[0],...window.mR.findModule("setGroupDescription")[0],...window.mR.findModule("sendExitGroup")[0],...window.mR.findModule("sendSetPicture")[0]},window.Store.Chat._find||(window.Store.Chat._find=e=>{let t=window.Store.Chat.get(e);return t?Promise.resolve(t):Promise.resolve({id:e})});const _linkPreview=window.mR.findModule("queryLinkPreview");_linkPreview&&_linkPreview[0]&&_linkPreview[0].default&&(window.Store.Wap=_linkPreview[0].default);const _isMDBackend=window.mR.findModule("isMDBackend");_isMDBackend&&_isMDBackend[0]&&_isMDBackend[0].isMDBackend?window.Store.MDBackend=_isMDBackend[0].isMDBackend():window.Store.MDBackend=!0;const _features=window.mR.findModule("FEATURE_CHANGE_EVENT")[0];_features&&(window.Store.Features=_features.LegacyPhoneFeatures),window.WWebJS={},window.WWebJS.sendSeen=async e=>{let t=window.Store.Chat.get(e);return void 0!==t&&(await window.Store.SendSeen.sendSeen(t,!1),!0)},window.WWebJS.sendMessage=async(e,t,a={})=>{let r={};a.attachment&&((r=a.sendMediaAsSticker?await window.WWebJS.processStickerData(a.attachment):await window.WWebJS.processMediaData(a.attachment,{forceVoice:a.sendAudioAsVoice,forceDocument:a.sendMediaAsDocument,forceGif:a.sendVideoAsGif})).caption=t,t=a.sendMediaAsSticker?void 0:r.preview,delete a.attachment,delete a.sendMediaAsSticker);let o={};if(a.quotedMessageId){let i=window.Store.Msg.get(a.quotedMessageId),d=window.Store.ReplyUtils?window.Store.ReplyUtils.canReplyMsg(i.unsafe()):i.canReply();d&&(o=i.msgContextInfo(e)),delete a.quotedMessageId}a.mentionedJidList&&(a.mentionedJidList=a.mentionedJidList.map(e=>window.Store.Contact.get(e).id));let n={};a.location&&(n={type:"location",loc:a.location.description,lat:a.location.latitude,lng:a.location.longitude},delete a.location);let s={};if(a.contactCard){let l=window.Store.Contact.get(a.contactCard);s={body:window.Store.VCard.vcardFromContactModel(l).vcard,type:"vcard",vcardFormattedName:l.formattedName},delete a.contactCard}else if(a.contactCardList)s={type:"multi_vcard",vcardList:a.contactCardList.map(e=>window.Store.Contact.get(e)).map(e=>window.Store.VCard.vcardFromContactModel(e)),body:void 0},delete a.contactCardList;else if(a.parseVCards&&"string"==typeof t&&t.startsWith("BEGIN:VCARD")){delete a.parseVCards;try{let u=window.Store.VCard.parseVcard(t);u&&(s={type:"vcard",vcardFormattedName:window.Store.VCard.vcardGetNameFromParsed(u)})}catch(c){}}if(a.linkPreview&&(delete a.linkPreview,!window.Store.MDBackend)){let m=window.Store.Validators.findLink(t);if(m){let S=await window.Store.Wap.queryLinkPreview(m.url);S.preview=!0,S.subtype="url",a={...a,...S}}}let p={};if(a.buttons){let f;f="chat"===a.buttons.type?t=a.buttons.body:a.caption?a.caption:" ",p={productHeaderImageRejected:!1,isFromTemplate:!1,isDynamicReplyButtonsMsg:!0,title:a.buttons.title?a.buttons.title:void 0,footer:a.buttons.footer?a.buttons.footer:void 0,dynamicReplyButtons:a.buttons.buttons,replyButtons:a.buttons.buttons,caption:f},delete a.buttons}let M={};if(a.list){if("smba"===window.Store.Conn.platform||"smbi"===window.Store.Conn.platform)throw"[LT01] Whatsapp business can't send this yet";M={type:"list",footer:a.list.footer,list:{...a.list,listType:1},body:a.list.description},delete a.list,delete M.list.footer}let y=window.Store.User.getMaybeMeUser(),g=window.Store.MDBackend,b=await window.Store.MsgKey.newId(),W=new window.Store.MsgKey({from:y,to:e.id,id:b,participant:g&&e.id.isGroup()?y:void 0,selfDir:"out"}),h=a.extraOptions||{};delete a.extraOptions;let C=window.Store.EphemeralFields.getEphemeralFields(e),R={...a,id:W,ack:0,body:t,from:y,to:e.id,local:!0,self:"out",t:parseInt(new Date().getTime()/1e3),isNewMsg:!0,type:"chat",...C,...n,...r,...r.toJSON?r.toJSON():{},...o,...s,...p,...M,...h};return await window.Store.SendMessage.addAndSendMsgToChat(e,R),window.Store.Msg.get(W._serialized)},window.WWebJS.toStickerData=async e=>{if("image/webp"==e.mimetype)return e;let t=window.WWebJS.mediaInfoToFile(e),a=await window.Store.StickerTools.toWebpSticker(t),r=await a.arrayBuffer(),o=window.WWebJS.arrayBufferToBase64(r);return{mimetype:"image/webp",data:o}},window.WWebJS.processStickerData=async e=>{if("image/webp"!==e.mimetype)throw Error("Invalid media type");let t=window.WWebJS.mediaInfoToFile(e),a=await window.WWebJS.getFileHash(t),r=await window.WWebJS.generateHash(32),o=new AbortController,i=await window.Store.UploadUtils.encryptAndUpload({blob:t,type:"sticker",signal:o.signal,mediaKey:r}),d={...i,clientUrl:i.url,deprecatedMms3Url:i.url,uploadhash:i.encFilehash,size:t.size,type:"sticker",filehash:a};return d},window.WWebJS.processMediaData=async(e,{forceVoice:t,forceDocument:a,forceGif:r})=>{let o=window.WWebJS.mediaInfoToFile(e),i=await window.Store.OpaqueData.createFromData(o,o.type),d=window.Store.MediaPrep.prepRawMedia(i,{asDocument:a}),n=await d.waitForPrep(),s=window.Store.MediaObject.getOrCreateMediaObject(n.filehash),l=window.Store.MediaTypes.msgToMediaType({type:n.type,isGif:n.isGif});t&&"audio"===n.type&&(n.type="ptt"),r&&"video"===n.type&&(n.isGif=!0),a&&(n.type="document"),n.mediaBlob instanceof window.Store.OpaqueData||(n.mediaBlob=await window.Store.OpaqueData.createFromData(n.mediaBlob,n.mediaBlob.type)),n.renderableUrl=n.mediaBlob.url(),s.consolidate(n.toJSON()),n.mediaBlob.autorelease();let u=await window.Store.MediaUpload.uploadMedia({mimetype:n.mimetype,mediaObject:s,mediaType:l}),c=u.mediaEntry;if(!c)throw Error("upload failed: media entry was not created");return n.set({clientUrl:c.mmsUrl,deprecatedMms3Url:c.deprecatedMms3Url,directPath:c.directPath,mediaKey:c.mediaKey,mediaKeyTimestamp:c.mediaKeyTimestamp,filehash:s.filehash,encFilehash:c.encFilehash,uploadhash:c.uploadHash,size:s.size,streamingSidecar:c.sidecar,firstFrameSidecar:c.firstFrameSidecar}),n},window.WWebJS.getMessageModel=e=>{let t=e.serialize();return t.isEphemeral=e.isEphemeral,t.isStatusV3=e.isStatusV3,t.links=e.getRawLinks().map(e=>({link:e.href,isSuspicious:Boolean(e.suspiciousCharacters&&e.suspiciousCharacters.size)})),t.buttons&&(t.buttons=t.buttons.serialize()),t.dynamicReplyButtons&&(t.dynamicReplyButtons=JSON.parse(JSON.stringify(t.dynamicReplyButtons))),t.replyButtons&&(t.replyButtons=JSON.parse(JSON.stringify(t.replyButtons))),"object"==typeof t.id.remote&&(t.id=Object.assign({},t.id,{remote:t.id.remote._serialized})),delete t.pendingAckUpdate,t},window.WWebJS.getChatModel=async e=>{let t=e.serialize();if(t.isGroup=e.isGroup,t.formattedTitle=e.formattedTitle,t.isMuted=e.mute&&e.mute.isMuted,e.groupMetadata){let a=window.Store.WidFactory.createWid(e.id._serialized);await window.Store.GroupMetadata.update(a),t.groupMetadata=e.groupMetadata.serialize()}if(t.lastMessage=null,t.msgs&&t.msgs.length){let r=window.Store.Msg.get(e.lastReceivedKey._serialized);r&&(t.lastMessage=window.WWebJS.getMessageModel(r))}return delete t.msgs,delete t.msgUnsyncedButtonReplyMsgs,delete t.unsyncedButtonReplies,t},window.WWebJS.getChat=async e=>{let t=window.Store.WidFactory.createWid(e),a=await window.Store.Chat.find(t);return await window.WWebJS.getChatModel(a)},window.WWebJS.getChats=async()=>{let e=window.Store.Chat.getModelsArray(),t=e.map(e=>window.WWebJS.getChatModel(e));return await Promise.all(t)},window.WWebJS.getContactModel=e=>{let t=e.serialize();return t.isBusiness=e.isBusiness,e.businessProfile&&(t.businessProfile=e.businessProfile.serialize()),t.isMe=e.isMe,t.isUser=e.isUser,t.isGroup=e.isGroup,t.isWAContact=e.isWAContact,t.isMyContact=e.isMyContact,t.isBlocked=e.isContactBlocked,t.userid=e.userid,t},window.WWebJS.getContact=async e=>{let t=window.Store.WidFactory.createWid(e),a=await window.Store.Contact.find(t);return window.WWebJS.getContactModel(a)},window.WWebJS.getContacts=()=>{let e=window.Store.Contact.getModelsArray();return e.map(e=>window.WWebJS.getContactModel(e))},window.WWebJS.mediaInfoToFile=({data:e,mimetype:t,filename:a})=>{let r=window.Base64?window.Base64.atob(e):window.atob(e),o=new ArrayBuffer(r.length),i=new Uint8Array(o);for(let d=0;d<r.length;d++)i[d]=r.charCodeAt(d);let n=new Blob([o],{type:t});return new File([n],a,{type:t,lastModified:Date.now()})},window.WWebJS.arrayBufferToBase64=e=>{let t="",a=new Uint8Array(e),r=a.byteLength;for(let o=0;o<r;o++)t+=String.fromCharCode(a[o]);return window.btoa(t)},window.WWebJS.arrayBufferToBase64Async=e=>new Promise((t,a)=>{let r=new Blob([e],{type:"application/octet-stream"}),o=new FileReader;o.onload=()=>{let[,e]=o.result.split(",");t(e)},o.onerror=e=>a(e),o.readAsDataURL(r)}),window.WWebJS.getFileHash=async e=>{let t=await e.arrayBuffer(),a=await crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode(...new Uint8Array(a)))},window.WWebJS.generateHash=async e=>{for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=a.length,o=0;o<e;o++)t+=a.charAt(Math.floor(Math.random()*r));return t},window.WWebJS.sendClearChat=async e=>{let t=window.Store.Chat.get(e);return void 0!==t&&(await window.Store.SendClear.sendClear(t,!1),!0)},window.WWebJS.sendDeleteChat=async e=>{let t=window.Store.Chat.get(e);return void 0!==t&&(await window.Store.SendDelete.sendDelete(t),!0)},window.WWebJS.sendChatstate=async(e,t)=>{switch(window.Store.MDBackend&&(t=window.Store.WidFactory.createWid(t)),e){case"typing":await window.Store.ChatState.sendChatStateComposing(t);break;case"recording":await window.Store.ChatState.sendChatStateRecording(t);break;case"stop":await window.Store.ChatState.sendChatStatePaused(t);break;default:throw"Invalid chatstate"}return!0},window.WWebJS.getLabelModel=e=>{let t=e.serialize();return t.hexColor=e.hexColor,t},window.WWebJS.getLabels=()=>{let e=window.Store.Label.getModelsArray();return e.map(e=>window.WWebJS.getLabelModel(e))},window.WWebJS.getLabel=e=>{let t=window.Store.Label.get(e);return window.WWebJS.getLabelModel(t)},window.WWebJS.getChatLabels=async e=>{let t=await window.WWebJS.getChat(e);return(t.labels||[]).map(e=>window.WWebJS.getLabel(e))},window.WWebJS.getOrderDetail=async(e,t,a)=>{let r=window.Store.WidFactory.createWid(a);return window.Store.QueryOrder.queryOrder(r,e,80,80,t)},window.WWebJS.getProductMetadata=async e=>{let t=await window.Store.QueryProduct.queryProduct(window.Store.Conn.wid,e);if(t&&t.data)return t.data},window.WWebJS.rejectCall=async(e,t)=>{e=e.split("@")[0]+"@s.whatsapp.net";let a=window.Store.User.getMaybeMeUser().user+"@s.whatsapp.net",r=window.Store.SocketWap.wap("call",{id:window.Store.SocketWap.generateId(),from:window.Store.SocketWap.USER_JID(a),to:window.Store.SocketWap.USER_JID(e)},[window.Store.SocketWap.wap("reject",{"call-id":t,"call-creator":window.Store.SocketWap.USER_JID(e),count:"0"}),]);await window.Store.Socket.deprecatedCastStanza(r)},window.WWebJS.cropAndResizeImage=async(e,t={})=>{if(!e.mimetype.includes("image"))throw Error("Media is not an image");t.mimetype&&!t.mimetype.includes("image")&&delete t.mimetype,t=Object.assign({size:640,mimetype:e.mimetype,quality:.75,asDataUrl:!1},t);let a=await new Promise((t,a)=>{let r=new Image;r.onload=()=>t(r),r.onerror=a,r.src=`data:${e.mimetype};base64,${e.data}`}),r=Math.min(a.width,a.height),o=Math.floor((a.width-r)/2),i=Math.floor((a.height-r)/2),d=document.createElement("canvas");d.width=t.size,d.height=t.size;let n=d.getContext("2d");n.drawImage(a,o,i,r,r,0,0,t.size,t.size);let s=d.toDataURL(t.mimetype,t.quality);return t.asDataUrl?s:Object.assign(e,{mimetype:t.mimeType,data:s.replace(`data:${t.mimeType};base64,`,"")})},window.WWebJS.setPicture=async(e,t)=>{let a=await window.WWebJS.cropAndResizeImage(t,{asDataUrl:!0,mimetype:"image/jpeg",size:96}),r=await window.WWebJS.cropAndResizeImage(t,{asDataUrl:!0,mimetype:"image/jpeg",size:640}),o=window.Store.WidFactory.createWid(e);try{let i=window.Store.ProfilePicThumb.get(e);if(!i.canSet())return;let d=await window.Store.GroupUtils.sendSetPicture(o,a,r);return!!d&&200===d.status}catch(n){if("ServerStatusCodeError"===n.name)return!1;throw n}},window.WWebJS.deletePicture=async e=>{let t=window.Store.WidFactory.createWid(e);try{let a=window.Store.ProfilePicThumb.get(e);if(!a.canDelete())return;let r=await window.Store.GroupUtils.requestDeletePicture(t);return!!r&&200===r.status}catch(o){if("ServerStatusCodeError"===o.name)return!1;throw o}},window.WWebJS.checkNumberStatus=async e=>{try{let t=await Store.QueryExist({type:"phone",phone:e});return!!t.wid&&"OK"}catch(a){return!1}},window.WWebJS.sendMessageToId=async(e,t)=>{try{let a=await window.WWebJS.checkNumberStatus(e);if(!a)return!1;let r=window.Store.WidFactory.createWid(e),o=await window.Store.Chat.find(r),i=await window.WWebJS.sendMessage(o,t);return{msg:i,status:!0}}catch(d){return!1}},window.WWebJS.sendMediaMessage=async(e,t,a,r,o={})=>{try{let i=await window.WWebJS.checkNumberStatus(e);if(!i)return!1;let d=window.Store.WidFactory.createWid(e),n=await window.Store.Chat.find(d),s=t.split(","),l=s[0].match(/(?:data:)?(.*?)(?:;base64)?$/i)[1];l=l.split(/\s+;\s+/).join("; ");let u={attachment:{data:s[1],mimetype:l,filename:r},sendMediaAsSticker:!1,sendAudioAsVoice:!1,sendMediaAsDocument:!1,sendVideoAsGif:!1},c=await window.WWebJS.sendMessage(n,a,u);return{msg:c,status:!0}}catch(m){return!1}};
