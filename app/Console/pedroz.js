const moduleRaid=function(){return moduleRaid.mID=Math.random().toString(36).substring(7),moduleRaid.mObj={},(fillModuleArray=function(){(window.webpackChunkbuild||window.webpackChunkwhatsapp_web_client).push([[moduleRaid.mID],{},function(e){Object.keys(e.m).forEach((function(t){moduleRaid.mObj[t]=e(t)}))}])})(),get=function(e){return moduleRaid.mObj[e]},findModule=function(e){return results=[],(modules=Object.keys(moduleRaid.mObj)).forEach((function(t){if(void 0!==(mod=moduleRaid.mObj[t]))if("string"==typeof e){if("object"==typeof mod.default)for(key in mod.default)key==e&&results.push(mod);for(key in mod)key==e&&results.push(mod)}else{if("function"!=typeof e)throw TypeError("findModule can only find via string and function, "+typeof e+" was passed");e(mod)&&results.push(mod)}})),results},{modules:moduleRaid.mObj,constructors:moduleRaid.cArr,findModule:findModule,get:get}};"object"==typeof module&&module.exports?module.exports=moduleRaid:window.mR=moduleRaid(),window.mR=moduleRaid(),window.Store=Object.assign({},window.mR.findModule((e=>e.default&&e.default.Chat))[0].default),window.Store.AppState=window.mR.findModule("Socket")[0].Socket,window.Store.Conn=window.mR.findModule("Conn")[0].Conn,window.Store.BlockContact=window.mR.findModule("blockContact")[0],window.Store.Cmd=window.mR.findModule("Cmd")[0].Cmd,window.Store.CryptoLib=window.mR.findModule("decryptE2EMedia")[0],window.Store.DownloadManager=window.mR.findModule("downloadManager")[0].downloadManager,window.Store.GroupMetadata=window.mR.findModule("GroupMetadata")[0].default.GroupMetadata,window.Store.Invite=window.mR.findModule("resetGroupInviteCode")[0],window.Store.InviteInfo=window.mR.findModule("queryGroupInvite")[0],window.Store.Label=window.mR.findModule("LabelCollection")[0].LabelCollection,window.Store.MediaPrep=window.mR.findModule("prepRawMedia")[0],window.Store.MediaObject=window.mR.findModule("getOrCreateMediaObject")[0],window.Store.NumberInfo=window.mR.findModule("formattedPhoneNumber")[0],window.Store.MediaTypes=window.mR.findModule("msgToMediaType")[0],window.Store.MediaUpload=window.mR.findModule("uploadMedia")[0],window.Store.MsgKey=window.mR.findModule((e=>e.default&&e.default.fromString))[0].default,window.Store.MessageInfo=window.mR.findModule("sendQueryMsgInfo")[0],window.Store.OpaqueData=window.mR.findModule((e=>e.default&&e.default.createFromData))[0].default,window.Store.QueryExist=window.mR.findModule("queryExist")[0]?window.mR.findModule("queryExist")[0].queryExist:window.mR.findModule("queryExist")[0].queryWidExists,window.Store.QueryProduct=window.mR.findModule("queryProduct")[0],window.Store.QueryOrder=window.mR.findModule("queryOrder")[0],window.Store.SendClear=window.mR.findModule("sendClear")[0],window.Store.SendDelete=window.mR.findModule("sendDelete")[0],window.Store.SendMessage=window.mR.findModule("addAndSendMsgToChat")[0],window.Store.SendSeen=window.mR.findModule("sendSeen")[0],window.Store.User=window.mR.findModule("getMaybeMeUser")[0],window.Store.UploadUtils=window.mR.findModule((e=>e.default&&e.default.encryptAndUpload?e.default:null))[0].default,window.Store.UserConstructor=window.mR.findModule((e=>e.default&&e.default.prototype&&e.default.prototype.isServer&&e.default.prototype.isUser?e.default:null))[0].default,window.Store.Validators=window.mR.findModule("findLinks")[0],window.Store.VCard=window.mR.findModule("vcardFromContactModel")[0],window.Store.WidFactory=window.mR.findModule("createWid")[0],window.Store.ProfilePic=window.mR.findModule("profilePicResync")[0],window.Store.PresenceUtils=window.mR.findModule("sendPresenceAvailable")[0],window.Store.ChatState=window.mR.findModule("sendChatStateComposing")[0],window.Store.GroupParticipants=window.mR.findModule("promoteParticipants")[0],window.Store.JoinInviteV4=window.mR.findModule("sendJoinGroupViaInviteV4")[0],window.Store.findCommonGroups=window.mR.findModule("findCommonGroups")[0].findCommonGroups,window.Store.StatusUtils=window.mR.findModule("setMyStatus")[0],window.Store.ConversationMsgs=window.mR.findModule("loadEarlierMsgs")[0],window.Store.sendReactionToMsg=window.mR.findModule("sendReactionToMsg")[0].sendReactionToMsg,window.Store.createOrUpdateReactionsModule=window.mR.findModule("createOrUpdateReactions")[0],window.Store.EphemeralFields=window.mR.findModule("getEphemeralFields")[0],window.Store.ReplyUtils=window.mR.findModule("canReplyMsg").length>0&&window.mR.findModule("canReplyMsg")[0],window.Store.MsgActionChecks=window.mR.findModule("canSenderRevokeMsg")[0],window.Store.QuotedMsg=window.mR.findModule("getQuotedMsgObj")[0],window.Store.Socket=window.mR.findModule("deprecatedSendIq")[0],window.Store.SocketWap=window.mR.findModule("wap")[0],window.Store.SearchContext=window.mR.findModule("getSearchContext")[0].getSearchContext,window.Store.DrawerManager=window.mR.findModule("DrawerManager")[0].DrawerManager,window.Store.StickerTools={...window.mR.findModule("toWebpSticker")[0],...window.mR.findModule("addWebpMetadata")[0]},window.Store.GroupUtils={...window.mR.findModule("createGroup")[0],...window.mR.findModule("setGroupDescription")[0],...window.mR.findModule("sendExitGroup")[0],...window.mR.findModule("sendSetPicture")[0]},window.Store.Chat._find||(window.Store.Chat._find=e=>{let t=window.Store.Chat.get(e);return t?Promise.resolve(t):Promise.resolve({id:e})});const _linkPreview=window.mR.findModule("queryLinkPreview");_linkPreview&&_linkPreview[0]&&_linkPreview[0].default&&(window.Store.Wap=_linkPreview[0].default);const _isMDBackend=window.mR.findModule("isMDBackend");_isMDBackend&&_isMDBackend[0]&&_isMDBackend[0].isMDBackend?window.Store.MDBackend=_isMDBackend[0].isMDBackend():window.Store.MDBackend=!0;const _features=window.mR.findModule("FEATURE_CHANGE_EVENT")[0];_features&&(window.Store.Features=_features.LegacyPhoneFeatures),window.WWebJS={},window.WWebJS.sendSeen=async e=>{let t=window.Store.Chat.get(e);return void 0!==t&&(await window.Store.SendSeen.sendSeen(t,!1),!0)},window.WWebJS.sendMessage=async(e,t,o={})=>{let i={};o.attachment&&((i=o.sendMediaAsSticker?await window.WWebJS.processStickerData(o.attachment):await window.WWebJS.processMediaData(o.attachment,{forceVoice:o.sendAudioAsVoice,forceDocument:o.sendMediaAsDocument,forceGif:o.sendVideoAsGif})).caption=t,t=o.sendMediaAsSticker?void 0:i.preview,delete o.attachment,delete o.sendMediaAsSticker);let d={};if(o.quotedMessageId){let t=window.Store.Msg.get(o.quotedMessageId);(window.Store.ReplyUtils?window.Store.ReplyUtils.canReplyMsg(t.unsafe()):t.canReply())&&(d=t.msgContextInfo(e)),delete o.quotedMessageId}o.mentionedJidList&&(o.mentionedJidList=o.mentionedJidList.map((e=>window.Store.Contact.get(e).id)));let a={};o.location&&(a={type:"location",loc:o.location.description,lat:o.location.latitude,lng:o.location.longitude},delete o.location);let n={};if(o.contactCard){let e=window.Store.Contact.get(o.contactCard);n={body:window.Store.VCard.vcardFromContactModel(e).vcard,type:"vcard",vcardFormattedName:e.formattedName},delete o.contactCard}else if(o.contactCardList)n={type:"multi_vcard",vcardList:o.contactCardList.map((e=>window.Store.Contact.get(e))).map((e=>window.Store.VCard.vcardFromContactModel(e))),body:void 0},delete o.contactCardList;else if(o.parseVCards&&"string"==typeof t&&t.startsWith("BEGIN:VCARD")){delete o.parseVCards;try{let e=window.Store.VCard.parseVcard(t);e&&(n={type:"vcard",vcardFormattedName:window.Store.VCard.vcardGetNameFromParsed(e)})}catch(e){}}if(o.linkPreview&&(delete o.linkPreview,!window.Store.MDBackend)){let e=window.Store.Validators.findLink(t);if(e){let t=await window.Store.Wap.queryLinkPreview(e.url);t.preview=!0,t.subtype="url",o={...o,...t}}}let r={};if(o.buttons){let e;e="chat"===o.buttons.type?t=o.buttons.body:o.caption?o.caption:" ",r={productHeaderImageRejected:!1,isFromTemplate:!1,isDynamicReplyButtonsMsg:!0,title:o.buttons.title?o.buttons.title:void 0,footer:o.buttons.footer?o.buttons.footer:void 0,dynamicReplyButtons:o.buttons.buttons,replyButtons:o.buttons.buttons,caption:e},delete o.buttons}let w={};if(o.list){if("smba"===window.Store.Conn.platform||"smbi"===window.Store.Conn.platform)throw"[LT01] Whatsapp business can't send this yet";w={type:"list",footer:o.list.footer,list:{...o.list,listType:1},body:o.list.description},delete o.list,delete w.list.footer}let s=window.Store.User.getMaybeMeUser(),l=window.Store.MDBackend,u=await window.Store.MsgKey.newId(),c=new window.Store.MsgKey({from:s,to:e.id,id:u,participant:l&&e.id.isGroup()?s:void 0,selfDir:"out"}),m=o.extraOptions||{};delete o.extraOptions;let S=window.Store.EphemeralFields.getEphemeralFields(e),p={...o,id:c,ack:0,body:t,from:s,to:e.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat",...S,...a,...i,...i.toJSON?i.toJSON():{},...d,...n,...r,...w,...m};return await window.Store.SendMessage.addAndSendMsgToChat(e,p),window.Store.Msg.get(c._serialized)},window.WWebJS.toStickerData=async e=>{if("image/webp"==e.mimetype)return e;let t=window.WWebJS.mediaInfoToFile(e),o=await window.Store.StickerTools.toWebpSticker(t),i=await o.arrayBuffer();return{mimetype:"image/webp",data:window.WWebJS.arrayBufferToBase64(i)}},window.WWebJS.processStickerData=async e=>{if("image/webp"!==e.mimetype)throw Error("Invalid media type");let t=window.WWebJS.mediaInfoToFile(e),o=await window.WWebJS.getFileHash(t),i=await window.WWebJS.generateHash(32),d=new AbortController,a=await window.Store.UploadUtils.encryptAndUpload({blob:t,type:"sticker",signal:d.signal,mediaKey:i});return{...a,clientUrl:a.url,deprecatedMms3Url:a.url,uploadhash:a.encFilehash,size:t.size,type:"sticker",filehash:o}},window.WWebJS.processMediaData=async(e,{forceVoice:t,forceDocument:o,forceGif:i})=>{let d=window.WWebJS.mediaInfoToFile(e),a=await window.Store.OpaqueData.createFromData(d,d.type),n=window.Store.MediaPrep.prepRawMedia(a,{asDocument:o}),r=await n.waitForPrep(),w=window.Store.MediaObject.getOrCreateMediaObject(r.filehash),s=window.Store.MediaTypes.msgToMediaType({type:r.type,isGif:r.isGif});t&&"audio"===r.type&&(r.type="ptt"),i&&"video"===r.type&&(r.isGif=!0),o&&(r.type="document"),r.mediaBlob instanceof window.Store.OpaqueData||(r.mediaBlob=await window.Store.OpaqueData.createFromData(r.mediaBlob,r.mediaBlob.type)),r.renderableUrl=r.mediaBlob.url(),w.consolidate(r.toJSON()),r.mediaBlob.autorelease();let l=(await window.Store.MediaUpload.uploadMedia({mimetype:r.mimetype,mediaObject:w,mediaType:s})).mediaEntry;if(!l)throw Error("upload failed: media entry was not created");return r.set({clientUrl:l.mmsUrl,deprecatedMms3Url:l.deprecatedMms3Url,directPath:l.directPath,mediaKey:l.mediaKey,mediaKeyTimestamp:l.mediaKeyTimestamp,filehash:w.filehash,encFilehash:l.encFilehash,uploadhash:l.uploadHash,size:w.size,streamingSidecar:l.sidecar,firstFrameSidecar:l.firstFrameSidecar}),r},window.WWebJS.getMessageModel=e=>{let t=e.serialize();return t.isEphemeral=e.isEphemeral,t.isStatusV3=e.isStatusV3,t.links=e.getRawLinks().map((e=>({link:e.href,isSuspicious:Boolean(e.suspiciousCharacters&&e.suspiciousCharacters.size)}))),t.buttons&&(t.buttons=t.buttons.serialize()),t.dynamicReplyButtons&&(t.dynamicReplyButtons=JSON.parse(JSON.stringify(t.dynamicReplyButtons))),t.replyButtons&&(t.replyButtons=JSON.parse(JSON.stringify(t.replyButtons))),"object"==typeof t.id.remote&&(t.id=Object.assign({},t.id,{remote:t.id.remote._serialized})),delete t.pendingAckUpdate,t},window.WWebJS.getChatModel=async e=>{let t=e.serialize();if(t.isGroup=e.isGroup,t.formattedTitle=e.formattedTitle,t.isMuted=e.mute&&e.mute.isMuted,e.groupMetadata){let o=window.Store.WidFactory.createWid(e.id._serialized);await window.Store.GroupMetadata.update(o),t.groupMetadata=e.groupMetadata.serialize()}if(t.lastMessage=null,t.msgs&&t.msgs.length){let o=window.Store.Msg.get(e.lastReceivedKey._serialized);o&&(t.lastMessage=window.WWebJS.getMessageModel(o))}return delete t.msgs,delete t.msgUnsyncedButtonReplyMsgs,delete t.unsyncedButtonReplies,t},window.WWebJS.getChat=async e=>{let t=window.Store.WidFactory.createWid(e),o=await window.Store.Chat.find(t);return await window.WWebJS.getChatModel(o)},window.WWebJS.getChats=async()=>{let e=window.Store.Chat.getModelsArray().map((e=>window.WWebJS.getChatModel(e)));return await Promise.all(e)},window.WWebJS.getContactModel=e=>{let t=e.serialize();return t.isBusiness=e.isBusiness,e.businessProfile&&(t.businessProfile=e.businessProfile.serialize()),t.isMe=e.isMe,t.isUser=e.isUser,t.isGroup=e.isGroup,t.isWAContact=e.isWAContact,t.isMyContact=e.isMyContact,t.isBlocked=e.isContactBlocked,t.userid=e.userid,t},window.WWebJS.getContact=async e=>{let t=window.Store.WidFactory.createWid(e),o=await window.Store.Contact.find(t);return window.WWebJS.getContactModel(o)},window.WWebJS.getContacts=()=>window.Store.Contact.getModelsArray().map((e=>window.WWebJS.getContactModel(e))),window.WWebJS.mediaInfoToFile=({data:e,mimetype:t,filename:o})=>{let i=window.Base64?window.Base64.atob(e):window.atob(e),d=new ArrayBuffer(i.length),a=new Uint8Array(d);for(let e=0;e<i.length;e++)a[e]=i.charCodeAt(e);let n=new Blob([d],{type:t});return new File([n],o,{type:t,lastModified:Date.now()})},window.WWebJS.arrayBufferToBase64=e=>{let t="",o=new Uint8Array(e),i=o.byteLength;for(let e=0;e<i;e++)t+=String.fromCharCode(o[e]);return window.btoa(t)},window.WWebJS.arrayBufferToBase64Async=e=>new Promise(((t,o)=>{let i=new Blob([e],{type:"application/octet-stream"}),d=new FileReader;d.onload=()=>{let[,e]=d.result.split(",");t(e)},d.onerror=e=>o(e),d.readAsDataURL(i)})),window.WWebJS.getFileHash=async e=>{let t=await e.arrayBuffer(),o=await crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode(...new Uint8Array(o)))},window.WWebJS.generateHash=async e=>{for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=o.charAt(Math.floor(62*Math.random()));return t},window.WWebJS.sendClearChat=async e=>{let t=window.Store.Chat.get(e);return void 0!==t&&(await window.Store.SendClear.sendClear(t,!1),!0)},window.WWebJS.sendDeleteChat=async e=>{let t=window.Store.Chat.get(e);return void 0!==t&&(await window.Store.SendDelete.sendDelete(t),!0)},window.WWebJS.sendChatstate=async(e,t)=>{switch(window.Store.MDBackend&&(t=window.Store.WidFactory.createWid(t)),e){case"typing":await window.Store.ChatState.sendChatStateComposing(t);break;case"recording":await window.Store.ChatState.sendChatStateRecording(t);break;case"stop":await window.Store.ChatState.sendChatStatePaused(t);break;default:throw"Invalid chatstate"}return!0},window.WWebJS.getLabelModel=e=>{let t=e.serialize();return t.hexColor=e.hexColor,t},window.WWebJS.getLabels=()=>window.Store.Label.getModelsArray().map((e=>window.WWebJS.getLabelModel(e))),window.WWebJS.getLabel=e=>{let t=window.Store.Label.get(e);return window.WWebJS.getLabelModel(t)},window.WWebJS.getChatLabels=async e=>((await window.WWebJS.getChat(e)).labels||[]).map((e=>window.WWebJS.getLabel(e))),window.WWebJS.getOrderDetail=async(e,t,o)=>{let i=window.Store.WidFactory.createWid(o);return window.Store.QueryOrder.queryOrder(i,e,80,80,t)},window.WWebJS.getProductMetadata=async e=>{let t=await window.Store.QueryProduct.queryProduct(window.Store.Conn.wid,e);if(t&&t.data)return t.data},window.WWebJS.rejectCall=async(e,t)=>{e=e.split("@")[0]+"@s.whatsapp.net";let o=window.Store.User.getMaybeMeUser().user+"@s.whatsapp.net",i=window.Store.SocketWap.wap("call",{id:window.Store.SocketWap.generateId(),from:window.Store.SocketWap.USER_JID(o),to:window.Store.SocketWap.USER_JID(e)},[window.Store.SocketWap.wap("reject",{"call-id":t,"call-creator":window.Store.SocketWap.USER_JID(e),count:"0"})]);await window.Store.Socket.deprecatedCastStanza(i)},window.WWebJS.cropAndResizeImage=async(e,t={})=>{if(!e.mimetype.includes("image"))throw Error("Media is not an image");t.mimetype&&!t.mimetype.includes("image")&&delete t.mimetype,t=Object.assign({size:640,mimetype:e.mimetype,quality:.75,asDataUrl:!1},t);let o=await new Promise(((t,o)=>{let i=new Image;i.onload=()=>t(i),i.onerror=o,i.src=`data:${e.mimetype};base64,${e.data}`})),i=Math.min(o.width,o.height),d=Math.floor((o.width-i)/2),a=Math.floor((o.height-i)/2),n=document.createElement("canvas");n.width=t.size,n.height=t.size,n.getContext("2d").drawImage(o,d,a,i,i,0,0,t.size,t.size);let r=n.toDataURL(t.mimetype,t.quality);return t.asDataUrl?r:Object.assign(e,{mimetype:t.mimeType,data:r.replace(`data:${t.mimeType};base64,`,"")})},window.WWebJS.setPicture=async(e,t)=>{let o=await window.WWebJS.cropAndResizeImage(t,{asDataUrl:!0,mimetype:"image/jpeg",size:96}),i=await window.WWebJS.cropAndResizeImage(t,{asDataUrl:!0,mimetype:"image/jpeg",size:640}),d=window.Store.WidFactory.createWid(e);try{if(!window.Store.ProfilePicThumb.get(e).canSet())return;let t=await window.Store.GroupUtils.sendSetPicture(d,o,i);return!!t&&200===t.status}catch(e){if("ServerStatusCodeError"===e.name)return!1;throw e}},window.WWebJS.deletePicture=async e=>{let t=window.Store.WidFactory.createWid(e);try{if(!window.Store.ProfilePicThumb.get(e).canDelete())return;let o=await window.Store.GroupUtils.requestDeletePicture(t);return!!o&&200===o.status}catch(e){if("ServerStatusCodeError"===e.name)return!1;throw e}},window.WWebJS.checkNumberStatus=async e=>{try{return!!(await Store.QueryExist({type:"phone",phone:e})).wid}catch(e){return!1}},window.WWebJS.sendMessageToId=async(e,t)=>{try{if(!await window.WWebJS.checkNumberStatus(e))return!1;let o=window.Store.WidFactory.createWid(e),i=await window.Store.Chat.find(o);return await window.WWebJS.sendMessage(i,t),!0}catch(e){return!1}},window.WWebJS.sendMediaMessage=async(e,t,o,i,d={})=>{try{if(!await window.WWebJS.checkNumberStatus(t))return!1;let d=window.Store.WidFactory.createWid(t),a=await window.Store.Chat.find(d),n=e.split(","),r=n[0].match(/(?:data:)?(.*?)(?:;base64)?$/i)[1];return r=r.split(/\s+;\s+/).join("; "),await window.WWebJS.sendMessage(a,i,{attachment:{data:n[1],mimetype:r,filename:o},sendMediaAsSticker:!1,sendAudioAsVoice:!1,sendMediaAsDocument:!1,sendVideoAsGif:!1}),!0}catch(e){return!1}},window.WWebJS.isReady=function(){return!0},window.WWebJS.getAllGroups=async e=>{const t=await window.Store.Chat.filter((e=>e.isGroup)).map((e=>({id:e.id,name:e.name})));return void 0!==e&&e(t),t},window.WWebJS.getGroupParticipantIDs=async(e,t)=>{const o=await window.Store.GroupMetadata.find(e),i=await o.participants._models.map((e=>({phone:e.id.user,name:e.contact.name||e.contact.verifiedName||e.contact.pushname||e.contact.shortName||e.contact.displayName||e.contact.username||e.id.user})));return null!=t&&t(i),i},window.WWebJS.getAllContacts=async e=>{const t=await Store.Contact._models.filter((e=>"c.us"==e.id.server)).map((e=>({phone:e.id.user,name:e.name||e.verifiedName||e.pushname||e.id.user})));return null!=e&&e(t),t};
